#!/usr/bin/env bash

rabbitmq_config_OnlyEnableThesePlugins() {
  echo "$RABBITMQ_ONLY_ENABLE_THESE_PLUGINS" | sort
}
rabbitmq_vhosts() {
  rabbitmqctl list_vhosts | tail -n +2 | tr '\n' ' '
}
rabbitmq_users() {
  rabbitmqctl list_users | tail -n +2 | sort
}
rabbitmq_permissions() {
  local vhost
  vhost=$1
  rabbitmqctl list_permissions -p $vhost | tail -n +2 | sort
}
rabbitmq_topic_permissions() {
  local vhost
  vhost=$1
  rabbitmqctl list_topic_permissions -p $vhost | tail -n +2 | sort
}
rabbitmq_plugins_installed_list() {
  rabbitmq-plugins list -m | sort
}
rabbitmq_plugins_all_enabled_list() {
  rabbitmq-plugins list -E -e -m | sort
}
rabbitmq_plugins_explicitly_enabled_list() {
  rabbitmq-plugins list -E -m | sort
}
# Introduced in 3.7.0
is_topic_permissions_supported() {
  [[ -n "$(rabbitmqctl 2>&1 | grep list_topic_permissions)" ]]
}
